#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Lint staged files
echo "ğŸ§¹ Linting staged files..."
npx lint-staged

# Type check
echo "ğŸ” Type checking..."
if [ -d "backend" ]; then
    cd backend && npm run type-check
    cd ..
fi

if [ -d "frontend" ]; then
    cd frontend && npm run type-check
    cd ..
fi

# Quick tests
echo "ğŸ§ª Running quick tests..."
if [ -d "backend" ]; then
    cd backend && npm run test -- --passWithNoTests --maxWorkers=1
    cd ..
fi

echo "âœ… Pre-commit checks completed"
